{"ast":null,"code":"import _regeneratorRuntime from\"/Users/zemeiwang/Downloads/react/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/zemeiwang/Downloads/react/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/zemeiwang/Downloads/react/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/zemeiwang/Downloads/react/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/zemeiwang/Downloads/react/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/zemeiwang/Downloads/react/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _taggedTemplateLiteral from\"/Users/zemeiwang/Downloads/react/movies-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3;import React,{Component}from'react';import ReactTable from'react-table';import api from'../api';import styled from'styled-components';import'react-table/react-table.css';var Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    padding: 0 40px 40px 40px;\\n\"])));var Update=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    color: #ef9b0f;\\n    cursor: pointer;\\n\"])));var Delete=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    color: #ff0000;\\n    cursor: pointer;\\n\"])));var UpdateMovie=/*#__PURE__*/function(_Component){_inherits(UpdateMovie,_Component);var _super=_createSuper(UpdateMovie);function UpdateMovie(){var _this;_classCallCheck(this,UpdateMovie);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.updateUser=function(event){event.preventDefault();window.location.href=\"/movies/update/\".concat(_this.props.id);};return _this;}_createClass(UpdateMovie,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Update,{onClick:this.updateUser},\"Update\");}}]);return UpdateMovie;}(Component);var DeleteMovie=/*#__PURE__*/function(_Component2){_inherits(DeleteMovie,_Component2);var _super2=_createSuper(DeleteMovie);function DeleteMovie(){var _this2;_classCallCheck(this,DeleteMovie);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this2=_super2.call.apply(_super2,[this].concat(args));_this2.deleteUser=function(event){event.preventDefault();if(window.confirm(\"Do tou want to delete the movie \".concat(_this2.props.id,\" permanently?\"))){api.deleteMovieById(_this2.props.id);window.location.reload();}};return _this2;}_createClass(DeleteMovie,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Delete,{onClick:this.deleteUser},\"Delete\");}}]);return DeleteMovie;}(Component);var MoviesList=/*#__PURE__*/function(_Component3){_inherits(MoviesList,_Component3);var _super3=_createSuper(MoviesList);function MoviesList(props){var _this3;_classCallCheck(this,MoviesList);_this3=_super3.call(this,props);_this3.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this3.setState({isLoading:true});_context.next=3;return api.getAllMovies().then(function(movies){_this3.setState({movies:movies.data.data,isLoading:false});});case 3:case\"end\":return _context.stop();}}},_callee);}));_this3.state={movies:[],columns:[],isLoading:false};return _this3;}_createClass(MoviesList,[{key:\"render\",value:function render(){var _this$state=this.state,movies=_this$state.movies,isLoading=_this$state.isLoading;console.log('TCL: MoviesList -> render -> movies',movies);var columns=[{Header:'ID',accessor:'_id',filterable:true},{Header:'Name',accessor:'name',filterable:true},{Header:'Rating',accessor:'rating',filterable:true},{Header:'Time',accessor:'time',Cell:function Cell(props){return/*#__PURE__*/React.createElement(\"span\",null,props.value.join(' / '));}},{Header:'',accessor:'',Cell:function Cell(props){return/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(DeleteMovie,{id:props.original._id}));}},{Header:'',accessor:'',Cell:function Cell(props){return/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(UpdateMovie,{id:props.original._id}));}}];var showTable=true;if(!movies.length){showTable=false;}return/*#__PURE__*/React.createElement(Wrapper,null,showTable&&/*#__PURE__*/React.createElement(ReactTable,{data:movies,columns:columns,loading:isLoading,defaultPageSize:10,showPageSizeOptions:true,minRows:0}));}}]);return MoviesList;}(Component);export default MoviesList;","map":{"version":3,"sources":["/Users/zemeiwang/Downloads/react/movies-app/client/src/pages/MoviesList.jsx"],"names":["React","Component","ReactTable","api","styled","Wrapper","div","Update","Delete","UpdateMovie","updateUser","event","preventDefault","window","location","href","props","id","DeleteMovie","deleteUser","confirm","deleteMovieById","reload","MoviesList","componentDidMount","setState","isLoading","getAllMovies","then","movies","data","state","columns","console","log","Header","accessor","filterable","Cell","value","join","original","_id","showTable","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport ReactTable from 'react-table'\nimport api from '../api'\n\nimport styled from 'styled-components'\n\nimport 'react-table/react-table.css'\n\nconst Wrapper = styled.div`\n    padding: 0 40px 40px 40px;\n`\n\nconst Update = styled.div`\n    color: #ef9b0f;\n    cursor: pointer;\n`\n\nconst Delete = styled.div`\n    color: #ff0000;\n    cursor: pointer;\n`\n\nclass UpdateMovie extends Component {\n    updateUser = event => {\n        event.preventDefault()\n\n        window.location.href = `/movies/update/${this.props.id}`\n    }\n\n    render() {\n        return <Update onClick={this.updateUser}>Update</Update>\n    }\n}\n\nclass DeleteMovie extends Component {\n    deleteUser = event => {\n        event.preventDefault()\n\n        if (\n            window.confirm(\n                `Do tou want to delete the movie ${this.props.id} permanently?`,\n            )\n        ) {\n            api.deleteMovieById(this.props.id)\n            window.location.reload()\n        }\n    }\n\n    render() {\n        return <Delete onClick={this.deleteUser}>Delete</Delete>\n    }\n}\n\nclass MoviesList extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            movies: [],\n            columns: [],\n            isLoading: false,\n        }\n    }\n\n    componentDidMount = async () => {\n        this.setState({ isLoading: true })\n\n        await api.getAllMovies().then(movies => {\n            this.setState({\n                movies: movies.data.data,\n                isLoading: false,\n            }) \n        })\n    }\n\n    render() {\n        const { movies, isLoading } = this.state\n        console.log('TCL: MoviesList -> render -> movies', movies)\n\n        const columns = [\n            {\n                Header: 'ID',\n                accessor: '_id',\n                filterable: true,\n            },\n            {\n                Header: 'Name',\n                accessor: 'name',\n                filterable: true,\n            },\n            {\n                Header: 'Rating',\n                accessor: 'rating',\n                filterable: true,\n            },\n            {\n                Header: 'Time',\n                accessor: 'time',\n                Cell: props => <span>{props.value.join(' / ')}</span>,\n            },\n            {\n                Header: '',\n                accessor: '',\n                Cell: function(props) {\n                    return (\n                        <span>\n                            <DeleteMovie id={props.original._id} />\n                        </span>\n                    )\n                },\n            },\n            {\n                Header: '',\n                accessor: '',\n                Cell: function(props) {\n                    return (\n                        <span>\n                            <UpdateMovie id={props.original._id} />\n                        </span>\n                    )\n                },\n            },\n        ]\n\n        let showTable = true\n        if (!movies.length) {\n            showTable = false\n        }\n\n        return (\n            <Wrapper>\n                {showTable && (\n                    <ReactTable\n                        data={movies}\n                        columns={columns}\n                        loading={isLoading}\n                        defaultPageSize={10}\n                        showPageSizeOptions={true}\n                        minRows={0}\n                    />\n                )}\n            </Wrapper>\n        )\n    }\n}\n\nexport default MoviesList"]},"metadata":{},"sourceType":"module"}